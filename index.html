<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Rinc칩n de Lectura</title>
    
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    <link rel="manifest" href="manifest.json">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body> 

    <header class="site-header">
        <div class="header-main">
            <h1 id="site-title">Mi Rinc칩n de Lectura</h1>
            <div class="header-controls">
                <button id="add-book-btn" type="button">A침adir Libro</button>
                <button id="toggle-view" type="button">Cuadr칤cula / Lista</button>
                <button id="toggle-theme" type="button">游깿</button>
                <button id="logout-btn" type="button">Cerrar Sesi칩n</button> 
            </div>
        </div>
        <div class="header-search">
            <input type="search" id="search-bar" placeholder="Buscar en mi biblioteca...">
        </div>
    </header>

    <main id="main-content">
        <section id="leyendo-ahora" aria-labelledby="leyendo-ahora-title">
            <h2 id="leyendo-ahora-title">Leyendo Ahora</h2>
            <div class="books-container" data-section="leyendo-ahora"></div>
        </section>
        <section id="proximas-lecturas" aria-labelledby="proximas-lecturas-title">
            <h2 id="proximas-lecturas-title">Pr칩ximas Lecturas</h2>
            <div class="books-container" data-section="proximas-lecturas"></div>
        </section>
        <section id="libros-terminados" aria-labelledby="libros-terminados-title">
            <h2 id="libros-terminados-title">Libros Terminados</h2>
            <div class="books-container" data-section="libros-terminados"></div>
        </section>
        <section id="lista-deseos" aria-labelledby="lista-deseos-title">
            <h2 id="lista-deseos-title">Lista de Deseos</h2>
            <div class="books-container" data-section="lista-deseos"></div>
        </section>
    </main>

<dialog id="add-book-modal">
        <form id="add-book-form">
            <h2>A침adir Nuevo Libro</h2>

            <div class="google-books-section" style="margin-bottom: 1.5rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem;">
                <label for="book-search">游댌 Autocompletar con Google Books:</label>
                <input type="search" id="book-search" placeholder="Escribe el t칤tulo para buscar...">
                
                <div id="book-search-results" class="book-search-results">
                    </div>

                <div class="google-attribution">
                    <img src="google-logo.png" alt="Powered by Google">
                </div>
            </div>

            <details id="manual-data-details">
                <summary>游닇 A침adir o editar datos manualmente</summary>
                
                <div class="manual-inputs-container">
                    <label for="title">T칤tulo:</label>
                    <input type="text" id="title" name="title" required>
                    
                    <label for="author">Autor:</label>
                    <input type="text" id="author" name="author" required>
                    
                    <label for="cover">URL de la Portada:</label>
                    <input type="url" id="cover" name="cover" placeholder="https://ejemplo.com/portada.jpg">
                    
                    <label for="total-pages">N칰mero total de p치ginas:</label>
                    <input type="number" id="total-pages" name="totalPages" min="1" placeholder="Ej: 350" required>
                </div>
            </details>

            <hr class="separator">
            
            <label for="section">Secci칩n:</label>
            <select id="section" name="section" required>
                <option value="leyendo-ahora">Leyendo Ahora</option>
                <option value="proximas-lecturas">Pr칩ximas Lecturas</option>
                <option value="libros-terminados">Libros Terminados</option>
                <option value="lista-deseos">Lista de Deseos</option>
            </select>
            <input type="hidden" id="googleLink" name="googleLink">
            <div class="modal-actions">
                <button type="submit" class="btn-primary">A침adir a mi Biblioteca</button>
                <button type="button" id="cancel-add-book" class="btn-cancel">Cancelar</button>
            </div>
        </form> 
    </dialog>
    
    <dialog id="book-detail-modal">
        <div class="detail-modal-content">
            <div id="detail-cover-container" class="detail-cover-container">
                <img src="" alt="Portada del libro" id="detail-cover" class="detail-cover">
                <div class="edit-cover-overlay">
                    <span>九勇</span>
                </div>
            </div>
            <div class="detail-info">
                <h2 id="detail-title">T칤tulo del Libro</h2>
                <p id="detail-author" class="detail-author">Autor del Libro</p>
                <a id="detail-google-link" href="#" target="_blank" style="display:none; color: #4285f4; text-decoration: none; font-size: 0.9rem; margin-bottom: 1rem;">游댕 Ver en Google Books</a>
                <div id="detail-progress-section" class="detail-progress-section">
                    <label for="current-page">Progreso de Lectura</label>
                    <div class="progress-inputs">
                        <input type="number" id="current-page" min="0">
                        <span id="total-pages-display">/ 0 p치ginas</span>
                    </div>
                    <div class="progress-bar-container">
                        <div id="progress-bar-fill"></div>
                    </div>
                    <span id="progress-percentage">0%</span>
                </div>

                <div class="detail-notes-section">
                    <label for="detail-notes">Mis Notas</label>
                    <textarea id="detail-notes" rows="6" placeholder="A침ade tus notas, citas favoritas o reflexiones aqu칤..."></textarea>
                </div>

                <div class="detail-page-actions">
                    <label for="move-book-select">Acciones</label>
                    <select id="move-book-select">
                        <option>Mover a otra secci칩n...</option>
                    </select>
                </div>

                <div class="modal-actions">
                    <button type="button" id="delete-book-modal-btn" class="btn-danger">Eliminar Libro</button>
                    <div class="modal-actions-right">
                        <button type="button" id="cancel-detail-modal" class="btn-cancel">Cerrar</button>
                        <button type="button" id="save-details-btn" class="btn-primary">Guardar Cambios</button>
                    </div>
                </div>
            </div>
        </div>
    </dialog>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script src="config.js"></script>

    <script>
      firebase.initializeApp(firebaseConfig);
    </script>

    <script src="cookies.js" defer></script>
    <script src="script.js" defer></script>

    <div id="cookie-banner" class="cookie-banner">
        <p>
            Utilizamos cookies y almacenamiento local para mejorar tu experiencia,
            guardar tus preferencias de tema y mantener tu sesi칩n iniciada.
            Al continuar, aceptas nuestro uso de cookies.
        </p>
        <button id="accept-cookies-btn" class="btn-primary">Aceptar</button>
    </div>
</body>
</html>