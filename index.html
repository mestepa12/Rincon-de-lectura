<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Rincón de Lectura</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body> 

    <header class="site-header">
        <div class="header-main">
            <h1 id="site-title">Mi Rincón de Lectura</h1>
            <div class="header-controls">
    <button id="add-book-btn" type="button">Añadir Libro</button>
    <button id="toggle-view" type="button">Cuadrícula / Lista</button>
    <button id="toggle-theme" type="button">🌙</button>
    <button id="logout-btn" type="button">Cerrar Sesión</button> 
</div>
        </div>
        <div class="header-search">
            <input type="search" id="search-bar" placeholder="Buscar por título o autor...">
        </div>
    </header>

    <main id="main-content">
        <section id="leyendo-ahora" aria-labelledby="leyendo-ahora-title">
            <h2 id="leyendo-ahora-title">Leyendo Ahora</h2>
            <div class="books-container" data-section="leyendo-ahora"></div>
        </section>
        <section id="proximas-lecturas" aria-labelledby="proximas-lecturas-title">
            <h2 id="proximas-lecturas-title">Próximas Lecturas</h2>
            <div class="books-container" data-section="proximas-lecturas"></div>
        </section>
        <section id="libros-terminados" aria-labelledby="libros-terminados-title">
            <h2 id="libros-terminados-title">Libros Terminados</h2>
            <div class="books-container" data-section="libros-terminados"></div>
        </section>
        <section id="lista-deseos" aria-labelledby="lista-deseos-title">
            <h2 id="lista-deseos-title">Lista de Deseos</h2>
            <div class="books-container" data-section="lista-deseos"></div>
        </section>
    </main>

    <dialog id="add-book-modal">
        <form id="add-book-form">
            <h2>Añadir Nuevo Libro</h2>
            <label for="title">Título:</label>
            <input type="text" id="title" name="title" required>
            <label for="author">Autor:</label>
            <input type="text" id="author" name="author" required>
            <label for="cover">URL de la Portada:</label>
            <input type="url" id="cover" name="cover" placeholder="https://ejemplo.com/portada.jpg">
            <label for="total-pages">Número total de páginas:</label>
            <input type="number" id="total-pages" name="totalPages" min="1" placeholder="Ej: 350" required>
            <label for="section">Sección:</label>
            <select id="section" name="section" required>
                <option value="leyendo-ahora">Leyendo Ahora</option>
                <option value="proximas-lecturas">Próximas Lecturas</option>
                <option value="libros-terminados">Libros Terminados</option>
                <option value="lista-deseos">Lista de Deseos</option>
            </select>
            <div class="modal-actions">
                <button type="submit" class="btn-primary">Añadir</button>
                <button type="button" id="cancel-add-book" class="btn-cancel">Cancelar</button>
            </div>
        </form>
    </dialog>

    <dialog id="book-detail-modal">
        <div class="detail-modal-content">
            <div id="detail-cover-container" class="detail-cover-container">
                <img src="" alt="Portada del libro" id="detail-cover" class="detail-cover">
                <div class="edit-cover-overlay">
                    <span>✏️</span>
                </div>
            </div>
            <div class="detail-info">
                <h2 id="detail-title">Título del Libro</h2>
                <p id="detail-author" class="detail-author">Autor del Libro</p>
                
                <div id="detail-progress-section" class="detail-progress-section">
                    <label for="current-page">Progreso de Lectura</label>
                    <div class="progress-inputs">
                        <input type="number" id="current-page" min="0">
                        <span id="total-pages-display">/ 0 páginas</span>
                    </div>
                    <div class="progress-bar-container">
                        <div id="progress-bar-fill"></div>
                    </div>
                    <span id="progress-percentage">0%</span>
                </div>

                <div class="detail-notes-section">
                    <label for="detail-notes">Mis Notas</label>
                    <textarea id="detail-notes" rows="6" placeholder="Añade tus notas, citas favoritas o reflexiones aquí..."></textarea>
                </div>

                <div class="detail-page-actions">
                    <label for="move-book-select">Acciones</label>
                    <select id="move-book-select">
                        <option>Mover a otra sección...</option>
                    </select>
                </div>

                <div class="modal-actions">
                    <button type="button" id="delete-book-modal-btn" class="btn-danger">Eliminar Libro</button>
                    <div class="modal-actions-right">
                        <button type="button" id="cancel-detail-modal" class="btn-cancel">Cerrar</button>
                        <button type="button" id="save-details-btn" class="btn-primary">Guardar Cambios</button>
                    </div>
                </div>
            </div>
        </div>
    </dialog>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script src="config.js"></script>

    <script>
      firebase.initializeApp(firebaseConfig);
    </script>

    <script src="script.js" defer></script>
</body>
</html>
